"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{1246:(e,t,r)=>{r.d(t,{s:()=>d});var i=r(4021),a=r(6546),n=r(9732);class s extends n.o{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof i.BKk?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=i.LlO.clone(e.uniforms),this.material=new i.BKk({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new n.F(this.material)}render(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)),this.fsQuad.render(e)}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class o extends n.o{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,r){let i,a,n=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(i=0,a=1):(i=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),s.buffers.stencil.setFunc(n.ALWAYS,i,0xffffffff),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(n.EQUAL,1,0xffffffff),s.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),s.buffers.stencil.setLocked(!0)}}class l extends n.o{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class d{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),void 0===t){let r=e.getSize(new i.I9Y);this._width=r.width,this._height=r.height,(t=new i.nWS(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:i.ix0})).texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new s(a.Z),this.copyPass.material.blending=i.XIg,this.clock=new i.zD7}swapBuffers(){let e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){let t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());let t=this.renderer.getRenderTarget(),r=!1;for(let t=0,i=this.passes.length;t<i;t++){let i=this.passes[t];if(!1!==i.enabled){if(i.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(t),i.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),i.needsSwap){if(r){let t=this.renderer.getContext(),r=this.renderer.state.buffers.stencil;r.setFunc(t.NOTEQUAL,1,0xffffffff),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),r.setFunc(t.EQUAL,1,0xffffffff)}this.swapBuffers()}void 0!==o&&(i instanceof o?r=!0:i instanceof l&&(r=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){let t=this.renderer.getSize(new i.I9Y);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;let r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let e=0;e<this.passes.length;e++)this.passes[e].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}},3302:(e,t,r)=>{r.d(t,{B:()=>u,v:()=>a});var i=r(4021);class a extends i.B69{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new i.I9Y(.5,.5),this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}let n=new i.Pq0,s=new i.kn4,o=new i.kn4,l=new i.Pq0,d=new i.Pq0;class u{constructor(e={}){let t,r,i,a,u=this,h={objects:new WeakMap},c=void 0!==e.element?e.element:document.createElement("div");c.style.overflow="hidden",this.domElement=c,this.getSize=function(){return{width:t,height:r}},this.render=function(e,t){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),s.copy(t.matrixWorldInverse),o.multiplyMatrices(t.projectionMatrix,s),function e(t,r,s){if(t.isCSS2DObject){var f,m;n.setFromMatrixPosition(t.matrixWorld),n.applyMatrix4(o);let e=!0===t.visible&&n.z>=-1&&n.z<=1&&!0===t.layers.test(s.layers);if(t.element.style.display=!0===e?"":"none",!0===e){t.onBeforeRender(u,r,s);let e=t.element;e.style.transform="translate("+-100*t.center.x+"%,"+-100*t.center.y+"%)translate("+(n.x*i+i)+"px,"+(-n.y*a+a)+"px)",e.parentNode!==c&&c.appendChild(e),t.onAfterRender(u,r,s)}let p={distanceToCameraSquared:(f=s,m=t,l.setFromMatrixPosition(f.matrixWorld),d.setFromMatrixPosition(m.matrixWorld),l.distanceToSquared(d))};h.objects.set(t,p)}for(let i=0,a=t.children.length;i<a;i++)e(t.children[i],r,s)}(e,e,t),function(e){let t=(function(e){let t=[];return e.traverse(function(e){e.isCSS2DObject&&t.push(e)}),t})(e).sort(function(e,t){return e.renderOrder!==t.renderOrder?t.renderOrder-e.renderOrder:h.objects.get(e).distanceToCameraSquared-h.objects.get(t).distanceToCameraSquared}),r=t.length;for(let e=0,i=t.length;e<i;e++)t[e].element.style.zIndex=r-e}(e)},this.setSize=function(e,n){t=e,r=n,i=t/2,a=r/2,c.style.width=e+"px",c.style.height=n+"px"}}}},3445:(e,t,r)=>{r.d(t,{Y:()=>a});var i=r(4021);class a extends i.BRH{constructor(e){super(e),this.type=i.ix0}parse(e){let t,r,a,n=function(e,t){switch(e){case 1:throw Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw Error("THREE.RGBELoader: Memory Error: "+(t||""))}},s=function(e,t,r){t=t||1024;let i=e.pos,a=-1,n=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));for(;0>(a=o.indexOf("\n"))&&n<t&&i<e.byteLength;)s+=o,n+=o.length,i+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(i,i+128)));return -1<a&&(!1!==r&&(e.pos+=n+a+1),s+o.slice(0,a))},o=new Uint8Array(e);o.pos=0;let l=function(e){let t,r,i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,d={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};for(!(e.pos>=e.byteLength)&&(t=s(e))||n(1,"no header found"),(r=t.match(/^#\?(\S+)/))||n(3,"bad initial token"),d.valid|=1,d.programtype=r[1],d.string+=t+"\n";!1!==(t=s(e));){if(d.string+=t+"\n","#"===t.charAt(0)){d.comments+=t+"\n";continue}if((r=t.match(i))&&(d.gamma=parseFloat(r[1])),(r=t.match(a))&&(d.exposure=parseFloat(r[1])),(r=t.match(o))&&(d.valid|=2,d.format=r[1]),(r=t.match(l))&&(d.valid|=4,d.height=parseInt(r[1],10),d.width=parseInt(r[2],10)),2&d.valid&&4&d.valid)break}return 2&d.valid||n(3,"missing format specifier"),4&d.valid||n(3,"missing image size specifier"),d}(o),d=l.width,u=l.height,h=function(e,t,r){if(t<8||t>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);t!==(e[2]<<8|e[3])&&n(3,"wrong scanline width");let i=new Uint8Array(4*t*r);i.length||n(4,"unable to allocate buffer space");let a=0,s=0,o=4*t,l=new Uint8Array(4),d=new Uint8Array(o),u=r;for(;u>0&&s<e.byteLength;){s+4>e.byteLength&&n(1),l[0]=e[s++],l[1]=e[s++],l[2]=e[s++],l[3]=e[s++],(2!=l[0]||2!=l[1]||(l[2]<<8|l[3])!=t)&&n(3,"bad rgbe scanline format");let r=0,h;for(;r<o&&s<e.byteLength;){let t=(h=e[s++])>128;if(t&&(h-=128),(0===h||r+h>o)&&n(3,"bad scanline data"),t){let t=e[s++];for(let e=0;e<h;e++)d[r++]=t}else d.set(e.subarray(s,s+h),r),r+=h,s+=h}for(let e=0;e<t;e++){let r=0;i[a]=d[e+r],r+=t,i[a+1]=d[e+r],r+=t,i[a+2]=d[e+r],r+=t,i[a+3]=d[e+r],a+=4}u--}return i}(o.subarray(o.pos),d,u);switch(this.type){case i.RQf:let c=new Float32Array(4*(a=h.length/4));for(let e=0;e<a;e++)!function(e,t,r,i){let a=Math.pow(2,e[t+3]-128)/255;r[i+0]=e[t+0]*a,r[i+1]=e[t+1]*a,r[i+2]=e[t+2]*a,r[i+3]=1}(h,4*e,c,4*e);t=c,r=i.RQf;break;case i.ix0:let f=new Uint16Array(4*(a=h.length/4));for(let e=0;e<a;e++)!function(e,t,r,a){let n=Math.pow(2,e[t+3]-128)/255;r[a+0]=i.GxU.toHalfFloat(Math.min(e[t+0]*n,65504)),r[a+1]=i.GxU.toHalfFloat(Math.min(e[t+1]*n,65504)),r[a+2]=i.GxU.toHalfFloat(Math.min(e[t+2]*n,65504)),r[a+3]=i.GxU.toHalfFloat(1)}(h,4*e,f,4*e);t=f,r=i.ix0;break;default:throw Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:d,height:u,data:t,header:l.string,gamma:l.gamma,exposure:l.exposure,type:r}}setDataType(e){return this.type=e,this}load(e,t,r,a){return super.load(e,function(e,r){switch(e.type){case i.RQf:case i.ix0:e.colorSpace=i.Zr2,e.minFilter=i.k6q,e.magFilter=i.k6q,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)},r,a)}}},4953:(e,t,r)=>{r.d(t,{c:()=>a});var i=r(4021);class a extends i.aHM{constructor(e){super(e)}load(e,t,r,a){let n=this,s=new i.Y9S(n.manager);s.setPath(n.path),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(r){try{t(n.parse(r))}catch(t){a?a(t):console.error(t),n.manager.itemError(e)}},r,a)}parse(e){function t(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function r(e,t,r,i){let a=parseInt(d[i].slice(e,e+t));if(a){let e="s"+Math.min(r,a)+"e"+Math.max(r,a);void 0===o[e]&&(s.push([r-1,a-1,1]),o[e]=s.length-1)}}let a={h:[255,255,255],he:[217,255,255],li:[204,128,255],be:[194,255,0],b:[255,181,181],c:[144,144,144],n:[48,80,248],o:[255,13,13],f:[144,224,80],ne:[179,227,245],na:[171,92,242],mg:[138,255,0],al:[191,166,166],si:[240,200,160],p:[255,128,0],s:[255,255,48],cl:[31,240,31],ar:[128,209,227],k:[143,64,212],ca:[61,255,0],sc:[230,230,230],ti:[191,194,199],v:[166,166,171],cr:[138,153,199],mn:[156,122,199],fe:[224,102,51],co:[240,144,160],ni:[80,208,80],cu:[200,128,51],zn:[125,128,176],ga:[194,143,143],ge:[102,143,143],as:[189,128,227],se:[255,161,0],br:[166,41,41],kr:[92,184,209],rb:[112,46,176],sr:[0,255,0],y:[148,255,255],zr:[148,224,224],nb:[115,194,201],mo:[84,181,181],tc:[59,158,158],ru:[36,143,143],rh:[10,125,140],pd:[0,105,133],ag:[192,192,192],cd:[255,217,143],in:[166,117,115],sn:[102,128,128],sb:[158,99,181],te:[212,122,0],i:[148,0,148],xe:[66,158,176],cs:[87,23,143],ba:[0,201,0],la:[112,212,255],ce:[255,255,199],pr:[217,255,199],nd:[199,255,199],pm:[163,255,199],sm:[143,255,199],eu:[97,255,199],gd:[69,255,199],tb:[48,255,199],dy:[31,255,199],ho:[0,255,156],er:[0,230,117],tm:[0,212,82],yb:[0,191,56],lu:[0,171,36],hf:[77,194,255],ta:[77,166,255],w:[33,148,214],re:[38,125,171],os:[38,102,150],ir:[23,84,135],pt:[208,208,224],au:[255,209,35],hg:[184,184,208],tl:[166,84,77],pb:[87,89,97],bi:[158,79,181],po:[171,92,0],at:[117,79,69],rn:[66,130,150],fr:[66,0,102],ra:[0,125,0],ac:[112,171,250],th:[0,186,255],pa:[0,161,255],u:[0,143,255],np:[0,128,255],pu:[0,107,255],am:[84,92,242],cm:[120,92,227],bk:[138,79,227],cf:[161,54,212],es:[179,31,212],fm:[179,31,186],md:[179,13,166],no:[189,13,135],lr:[199,0,102],rf:[204,0,89],db:[209,0,79],sg:[217,0,69],bh:[224,0,56],hs:[230,0,46],mt:[235,0,38],ds:[235,0,38],rg:[235,0,38],cn:[235,0,38],uut:[235,0,38],uuq:[235,0,38],uup:[235,0,38],uuh:[235,0,38],uus:[235,0,38],uuo:[235,0,38]},n=[],s=[],o={},l={},d=e.split("\n");for(let e=0,i=d.length;e<i;e++)if("ATOM"===d[e].slice(0,4)||"HETATM"===d[e].slice(0,6)){var u;let r=parseFloat(d[e].slice(30,37)),i=parseFloat(d[e].slice(38,45)),s=parseFloat(d[e].slice(46,53)),o=parseInt(d[e].slice(6,11))-1,h=t(d[e].slice(76,78)).toLowerCase();""===h&&(h=t(d[e].slice(12,14)).toLowerCase());let c=[r,i,s,a[h],(u=h).charAt(0).toUpperCase()+u.slice(1).toLowerCase()];n.push(c),l[o]=c}else if("CONECT"===d[e].slice(0,6)){let t=parseInt(d[e].slice(6,11));r(11,5,t,e),r(16,5,t,e),r(21,5,t,e),r(26,5,t,e)}return function(){let e={geometryAtoms:new i.LoY,geometryBonds:new i.LoY,json:{atoms:n}},t=e.geometryAtoms,r=e.geometryBonds,a=[],o=[],d=[],u=new i.Q1f;for(let e=0,t=n.length;e<t;e++){let t=n[e],r=t[0],i=t[1],s=t[2];a.push(r,i,s);let l=t[3][0]/255,d=t[3][1]/255,h=t[3][2]/255;u.set(l,d,h).convertSRGBToLinear(),o.push(u.r,u.g,u.b)}for(let e=0,t=s.length;e<t;e++){let t=s[e],r=t[0],i=t[1],a=l[r],n=l[i],o=a[0],u=a[1],h=a[2];d.push(o,u,h),o=n[0],u=n[1],h=n[2],d.push(o,u,h)}return t.setAttribute("position",new i.qtW(a,3)),t.setAttribute("color",new i.qtW(o,3)),r.setAttribute("position",new i.qtW(d,3)),e}()}}},6488:(e,t,r)=>{r.d(t,{G:()=>s});var i=r(4021),a=r(9732),n=r(6546);class s extends a.o{constructor(e,t,r,s){super(),this.renderScene=t,this.renderCamera=r,this.selectedObjects=void 0!==s?s:[],this.visibleEdgeColor=new i.Q1f(1,1,1),this.hiddenEdgeColor=new i.Q1f(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==e?new i.I9Y(e.x,e.y):new i.I9Y(256,256);let o=Math.round(this.resolution.x/this.downSampleRatio),l=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new i.nWS(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new i.CSG,this.depthMaterial.side=i.$EB,this.depthMaterial.depthPacking=i.N5j,this.depthMaterial.blending=i.XIg,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=i.$EB,this.prepareMaskMaterial.fragmentShader=function(e,t){let r=t.isPerspectiveCamera?"perspective":"orthographic";return e.replace(/DEPTH_TO_VIEW_Z/g,r+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new i.nWS(this.resolution.x,this.resolution.y,{type:i.ix0}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new i.nWS(o,l,{type:i.ix0}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new i.nWS(o,l,{type:i.ix0}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new i.nWS(Math.round(o/2),Math.round(l/2),{type:i.ix0}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new i.nWS(o,l,{type:i.ix0}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new i.nWS(Math.round(o/2),Math.round(l/2),{type:i.ix0}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(o,l),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(o/2),Math.round(l/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial();let d=n.Z;this.copyUniforms=i.LlO.clone(d.uniforms),this.materialCopy=new i.BKk({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:i.XIg,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new i.Q1f,this.oldClearAlpha=1,this.fsQuad=new a.F(null),this.tempPulseColor1=new i.Q1f,this.tempPulseColor2=new i.Q1f,this.textureMatrix=new i.kn4}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let r=Math.round(e/this.downSampleRatio),i=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(r,i),this.renderTargetBlurBuffer1.setSize(r,i),this.renderTargetEdgeBuffer1.setSize(r,i),this.separableBlurMaterial1.uniforms.texSize.value.set(r,i),r=Math.round(r/2),i=Math.round(i/2),this.renderTargetBlurBuffer2.setSize(r,i),this.renderTargetEdgeBuffer2.setSize(r,i),this.separableBlurMaterial2.uniforms.texSize.value.set(r,i)}changeVisibilityOfSelectedObjects(e){let t=this._visibilityCache;function r(r){r.isMesh&&(!0===e?r.visible=t.get(r):(t.set(r,r.visible),r.visible=e))}for(let e=0;e<this.selectedObjects.length;e++)this.selectedObjects[e].traverse(r)}changeVisibilityOfNonSelectedObjects(e){let t=this._visibilityCache,r=[];function i(e){e.isMesh&&r.push(e)}for(let e=0;e<this.selectedObjects.length;e++)this.selectedObjects[e].traverse(i);this.renderScene.traverse(function(i){if(i.isMesh||i.isSprite){let a=!1;for(let e=0;e<r.length;e++)if(r[e].id===i.id){a=!0;break}if(!1===a){let r=i.visible;(!1===e||!0===t.get(i))&&(i.visible=e),t.set(i,r)}}else(i.isPoints||i.isLine)&&(!0===e?i.visible=t.get(i):(t.set(i,i.visible),i.visible=e))})}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,r,i,a){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();let t=e.autoClear;e.autoClear=!1,a&&e.state.buffers.stencil.setTest(!1),e.setClearColor(0xffffff,1),this.changeVisibilityOfSelectedObjects(!1);let i=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=i,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){let e=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(e),this.tempPulseColor2.multiplyScalar(e)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=s.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=s.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=s.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=s.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,a&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(r),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=t}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=r.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new i.BKk({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new i.I9Y(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif
					
					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new i.BKk({uniforms:{maskTexture:{value:null},texSize:{value:new i.I9Y(.5,.5)},visibleEdgeColor:{value:new i.Pq0(1,1,1)},hiddenEdgeColor:{value:new i.Pq0(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(e){return new i.BKk({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new i.I9Y(.5,.5)},direction:{value:new i.I9Y(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new i.BKk({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:i.EZo,depthTest:!1,depthWrite:!1,transparent:!0})}}s.BlurDirectionX=new i.I9Y(1,0),s.BlurDirectionY=new i.I9Y(0,1)},6546:(e,t,r)=>{r.d(t,{Z:()=>i});let i={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`}},6624:(e,t,r)=>{r.d(t,{A:()=>n});var i=r(4021),a=r(9732);class n extends a.o{constructor(e,t,r=null,a=null,n=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=a,this.clearAlpha=n,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new i.Q1f}render(e,t,r){let i,a,n=e.autoClear;e.autoClear=!1,null!==this.overrideMaterial&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),null!==this.clearAlpha&&(i=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),!0==this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),!0===this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),null!==this.clearColor&&e.setClearColor(this._oldClearColor),null!==this.clearAlpha&&e.setClearAlpha(i),null!==this.overrideMaterial&&(this.scene.overrideMaterial=a),e.autoClear=n}}},7122:(e,t,r)=>{r.d(t,{N:()=>u});var i=r(4021);let a={type:"change"},n={type:"start"},s={type:"end"},o=new i.RlV,l=new i.Zcv,d=Math.cos(70*i.cj9.DEG2RAD);class u extends i.Qev{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new i.Pq0,this.cursor=new i.Pq0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:i.kBv.ROTATE,MIDDLE:i.kBv.DOLLY,RIGHT:i.kBv.PAN},this.touches={ONE:i.wtR.ROTATE,TWO:i.wtR.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",J),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",J),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(a),r.update(),h=u.NONE},this.update=function(){let t=new i.Pq0,n=new i.PTz().setFromUnitVectors(e.up,new i.Pq0(0,1,0)),s=n.clone().invert(),v=new i.Pq0,x=new i.PTz,b=new i.Pq0,w=2*Math.PI;return function(y=null){var T;let M=r.object.position;t.copy(M).sub(r.target),t.applyQuaternion(n),f.setFromVector3(t),r.autoRotate&&h===u.NONE&&O(null!==(T=y)?2*Math.PI/60*r.autoRotateSpeed*T:2*Math.PI/60/60*r.autoRotateSpeed),r.enableDamping?(f.theta+=m.theta*r.dampingFactor,f.phi+=m.phi*r.dampingFactor):(f.theta+=m.theta,f.phi+=m.phi);let E=r.minAzimuthAngle,S=r.maxAzimuthAngle;isFinite(E)&&isFinite(S)&&(E<-Math.PI?E+=w:E>Math.PI&&(E-=w),S<-Math.PI?S+=w:S>Math.PI&&(S-=w),E<=S?f.theta=Math.max(E,Math.min(S,f.theta)):f.theta=f.theta>(E+S)/2?Math.max(E,f.theta):Math.min(S,f.theta)),f.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,f.phi)),f.makeSafe(),!0===r.enableDamping?r.target.addScaledVector(g,r.dampingFactor):r.target.add(g),r.target.sub(r.cursor),r.target.clampLength(r.minTargetRadius,r.maxTargetRadius),r.target.add(r.cursor),r.zoomToCursor&&A||r.object.isOrthographicCamera?f.radius=z(f.radius):f.radius=z(f.radius*p),t.setFromSpherical(f),t.applyQuaternion(s),M.copy(r.target).add(t),r.object.lookAt(r.target),!0===r.enableDamping?(m.theta*=1-r.dampingFactor,m.phi*=1-r.dampingFactor,g.multiplyScalar(1-r.dampingFactor)):(m.set(0,0,0),g.set(0,0,0));let B=!1;if(r.zoomToCursor&&A){let a=null;if(r.object.isPerspectiveCamera){let e=t.length();a=z(e*p);let i=e-a;r.object.position.addScaledVector(C,i),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){let e=new i.Pq0(P.x,P.y,0);e.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),B=!0;let n=new i.Pq0(P.x,P.y,0);n.unproject(r.object),r.object.position.sub(n).add(e),r.object.updateMatrixWorld(),a=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;null!==a&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(a).add(r.object.position):(o.origin.copy(r.object.position),o.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(o.direction))<d?e.lookAt(r.target):(l.setFromNormalAndCoplanarPoint(r.object.up,r.target),o.intersectPlane(l,r.target))))}else r.object.isOrthographicCamera&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/p)),r.object.updateProjectionMatrix(),B=!0);return p=1,A=!1,!!(B||v.distanceToSquared(r.object.position)>c||8*(1-x.dot(r.object.quaternion))>c||b.distanceToSquared(r.target)>0)&&(r.dispatchEvent(a),v.copy(r.object.position),x.copy(r.object.quaternion),b.copy(r.target),!0)}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",ee),r.domElement.removeEventListener("pointerdown",Q),r.domElement.removeEventListener("pointercancel",X),r.domElement.removeEventListener("wheel",$),r.domElement.removeEventListener("pointermove",Z),r.domElement.removeEventListener("pointerup",X),null!==r._domElementKeyEvents&&(r._domElementKeyEvents.removeEventListener("keydown",J),r._domElementKeyEvents=null)};let r=this,u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},h=u.NONE,c=1e-6,f=new i.YHV,m=new i.YHV,p=1,g=new i.Pq0,v=new i.I9Y,x=new i.I9Y,b=new i.I9Y,w=new i.I9Y,y=new i.I9Y,T=new i.I9Y,M=new i.I9Y,E=new i.I9Y,S=new i.I9Y,C=new i.Pq0,P=new i.I9Y,A=!1,B=[],k={};function R(e){let t=Math.abs(e)/(100*(0|window.devicePixelRatio));return Math.pow(.95,r.zoomSpeed*t)}function O(e){m.theta-=e}function D(e){m.phi-=e}let I=function(){let e=new i.Pq0;return function(t,r){e.setFromMatrixColumn(r,0),e.multiplyScalar(-t),g.add(e)}}(),L=function(){let e=new i.Pq0;return function(t,i){!0===r.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(r.object.up,e)),e.multiplyScalar(t),g.add(e)}}(),N=function(){let e=new i.Pq0;return function(t,i){let a=r.domElement;if(r.object.isPerspectiveCamera){let n=r.object.position;e.copy(n).sub(r.target);let s=e.length();I(2*t*(s*=Math.tan(r.object.fov/2*Math.PI/180))/a.clientHeight,r.object.matrix),L(2*i*s/a.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(I(t*(r.object.right-r.object.left)/r.object.zoom/a.clientWidth,r.object.matrix),L(i*(r.object.top-r.object.bottom)/r.object.zoom/a.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function _(e){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?p/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function j(e){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?p*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function U(e,t){if(!r.zoomToCursor)return;A=!0;let i=r.domElement.getBoundingClientRect(),a=e-i.left,n=t-i.top,s=i.width,o=i.height;P.x=a/s*2-1,P.y=-(n/o*2)+1,C.set(P.x,P.y,1).unproject(r.object).sub(r.object.position).normalize()}function z(e){return Math.max(r.minDistance,Math.min(r.maxDistance,e))}function F(e){v.set(e.clientX,e.clientY)}function Y(e){w.set(e.clientX,e.clientY)}function V(e){if(1===B.length)v.set(e.pageX,e.pageY);else{let t=er(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);v.set(r,i)}}function q(e){if(1===B.length)w.set(e.pageX,e.pageY);else{let t=er(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);w.set(r,i)}}function H(e){let t=er(e),r=e.pageX-t.x,i=e.pageY-t.y,a=Math.sqrt(r*r+i*i);M.set(0,a)}function W(e){if(1==B.length)x.set(e.pageX,e.pageY);else{let t=er(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);x.set(r,i)}b.subVectors(x,v).multiplyScalar(r.rotateSpeed);let t=r.domElement;O(2*Math.PI*b.x/t.clientHeight),D(2*Math.PI*b.y/t.clientHeight),v.copy(x)}function G(e){if(1===B.length)y.set(e.pageX,e.pageY);else{let t=er(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);y.set(r,i)}T.subVectors(y,w).multiplyScalar(r.panSpeed),N(T.x,T.y),w.copy(y)}function K(e){let t=er(e),i=e.pageX-t.x,a=e.pageY-t.y,n=Math.sqrt(i*i+a*a);E.set(0,n),S.set(0,Math.pow(E.y/M.y,r.zoomSpeed)),_(S.y),M.copy(E),U((e.pageX+t.x)*.5,(e.pageY+t.y)*.5)}function Q(e){var t;!1!==r.enabled&&(0===B.length&&(r.domElement.setPointerCapture(e.pointerId),r.domElement.addEventListener("pointermove",Z),r.domElement.addEventListener("pointerup",X)),t=e,B.push(t.pointerId),"touch"===e.pointerType?function(e){switch(et(e),B.length){case 1:switch(r.touches.ONE){case i.wtR.ROTATE:if(!1===r.enableRotate)return;V(e),h=u.TOUCH_ROTATE;break;case i.wtR.PAN:if(!1===r.enablePan)return;q(e),h=u.TOUCH_PAN;break;default:h=u.NONE}break;case 2:switch(r.touches.TWO){case i.wtR.DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;r.enableZoom&&H(e),r.enablePan&&q(e),h=u.TOUCH_DOLLY_PAN;break;case i.wtR.DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.enableZoom&&H(e),r.enableRotate&&V(e),h=u.TOUCH_DOLLY_ROTATE;break;default:h=u.NONE}break;default:h=u.NONE}h!==u.NONE&&r.dispatchEvent(n)}(e):function(e){let t;switch(e.button){case 0:t=r.mouseButtons.LEFT;break;case 1:t=r.mouseButtons.MIDDLE;break;case 2:t=r.mouseButtons.RIGHT;break;default:t=-1}switch(t){case i.kBv.DOLLY:if(!1===r.enableZoom)return;U(e.clientX,e.clientX),M.set(e.clientX,e.clientY),h=u.DOLLY;break;case i.kBv.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enablePan)return;Y(e),h=u.PAN}else{if(!1===r.enableRotate)return;F(e),h=u.ROTATE}break;case i.kBv.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enableRotate)return;F(e),h=u.ROTATE}else{if(!1===r.enablePan)return;Y(e),h=u.PAN}break;default:h=u.NONE}h!==u.NONE&&r.dispatchEvent(n)}(e))}function Z(e){!1!==r.enabled&&("touch"===e.pointerType?function(e){switch(et(e),h){case u.TOUCH_ROTATE:if(!1===r.enableRotate)return;W(e),r.update();break;case u.TOUCH_PAN:if(!1===r.enablePan)return;G(e),r.update();break;case u.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;r.enableZoom&&K(e),r.enablePan&&G(e),r.update();break;case u.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.enableZoom&&K(e),r.enableRotate&&W(e),r.update();break;default:h=u.NONE}}(e):function(e){switch(h){case u.ROTATE:if(!1===r.enableRotate)return;x.set(e.clientX,e.clientY),b.subVectors(x,v).multiplyScalar(r.rotateSpeed);let t=r.domElement;O(2*Math.PI*b.x/t.clientHeight),D(2*Math.PI*b.y/t.clientHeight),v.copy(x),r.update();break;case u.DOLLY:if(!1===r.enableZoom)return;E.set(e.clientX,e.clientY),S.subVectors(E,M),S.y>0?_(R(S.y)):S.y<0&&j(R(S.y)),M.copy(E),r.update();break;case u.PAN:if(!1===r.enablePan)return;y.set(e.clientX,e.clientY),T.subVectors(y,w).multiplyScalar(r.panSpeed),N(T.x,T.y),w.copy(y),r.update()}}(e))}function X(e){(function(e){delete k[e.pointerId];for(let t=0;t<B.length;t++)if(B[t]==e.pointerId)return void B.splice(t,1)})(e),0===B.length&&(r.domElement.releasePointerCapture(e.pointerId),r.domElement.removeEventListener("pointermove",Z),r.domElement.removeEventListener("pointerup",X)),r.dispatchEvent(s),h=u.NONE}function $(e){!1!==r.enabled&&!1!==r.enableZoom&&h===u.NONE&&(e.preventDefault(),r.dispatchEvent(n),U(e.clientX,e.clientY),e.deltaY<0?j(R(e.deltaY)):e.deltaY>0&&_(R(e.deltaY)),r.update(),r.dispatchEvent(s))}function J(e){if(!1!==r.enabled&&!1!==r.enablePan){let t=!1;switch(e.code){case r.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?D(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):N(0,r.keyPanSpeed),t=!0;break;case r.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?D(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):N(0,-r.keyPanSpeed),t=!0;break;case r.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?O(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):N(r.keyPanSpeed,0),t=!0;break;case r.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?O(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):N(-r.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),r.update())}}function ee(e){!1!==r.enabled&&e.preventDefault()}function et(e){let t=k[e.pointerId];void 0===t&&(t=new i.I9Y,k[e.pointerId]=t),t.set(e.pageX,e.pageY)}function er(e){return k[e.pointerId===B[0]?B[1]:B[0]]}r.domElement.addEventListener("contextmenu",ee),r.domElement.addEventListener("pointerdown",Q),r.domElement.addEventListener("pointercancel",X),r.domElement.addEventListener("wheel",$,{passive:!1}),this.update()}}},9356:(e,t,r)=>{r.d(t,{MJ:()=>c});var i=r(4021);let a=new Map,n=new i.Ho_(1,1,1,8),s=new i.qFE(2,1,8,1,!0);function o(e){return a.has(e)||a.set(e,new i.Gu$(e,16,16)),a.get(e)}let l={H:0xffffff,C:0xaaaaaa,N:3166456,O:0xff0d0d,F:9494608,CL:2093087,BR:0xa62929,I:9699476,P:0xff8000,S:0xffff30},d={H:.25,C:.35,N:.33,O:.33,F:.32,CL:.4,BR:.43,I:.5,P:.38,S:.37};Object.assign(d,{SI:.42,B:.3,SE:.5,TE:.56,ZN:.48,FE:.5,CU:.46,NI:.49,CA:.51,NA:.6,CL:.4,BR:.45,I:.5});let u={H:1,HE:2,LI:3,BE:4,B:5,C:6,N:7,O:8,F:9,NE:10,NA:11,MG:12,AL:13,SI:14,P:15,S:16,CL:17,AR:18,K:19,CA:20,FE:26,CU:29,ZN:30,BR:35,I:53},h=new Set(["LI","NA","K","RB","CS","FR","BE","MG","CA","SR","BA","RA","SC","Y","TI","ZR","HF","V","NB","TA","CR","MO","W","MN","TC","RE","FE","RU","OS","CO","RH","IR","NI","PD","PT","CU","AG","AU","ZN","CD","HG","AL","GA","IN","TL","SN","PB","BI","PO","FL","LV","NH","MC","LA","CE","PR","ND","PM","SM","EU","GD","TB","DY","HO","ER","TM","YB","LU","AC","TH","PA","U","NP","PU","AM","CM","BK","CF","ES","FM","MD","NO","LR"]);function c(e,t={}){let r,{showHydrogen:a,includeHydrogens:m,layout:p="auto",hiddenElements:g=[],elementColors:v={},elementRadii:x={},attachAtomData:b=!0,attachProperties:w=!0,renderMultipleBonds:y=!0,multipleBondOffset:T=.1,useCylinders:M,bondRadius:E=.02,inferBridgingBonds:S=!0,addThreeCenterBonds:C,bondGeometry:P,atomGeometry:A,coordinateScale:B=1,onProgress:k,performance:R={},instancing:O=!1,createBonds:D=!0}=t;r=void 0!==M?M:!P?.type||"cylinder"===P.type;let I=A?.type??"sphere",L=A?.radius,N=P?.radius??E,_=R?.skipBondsOverAtomThreshold;"function"==typeof k&&k("parse:start",0);let j=e.split("$$$$")[0],U=new Set(g.map(e=>e.toUpperCase()));(void 0!==a?a:void 0!==m&&!!m)||U.add("H");let z=function(e,t={}){if(void 0===(t={...t}).modifiers&&(t.modifiers={}),void 0===t.forEach&&(t.forEach={}),void 0===t.dynamicTyping&&(t.dynamicTyping=!0),"string"!=typeof(e=function(e,t={}){if("string"==typeof e)return e;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer){let{encoding:r=function(e){let t=ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e);if(t.length>=2){if(254===t[0]&&255===t[1])return"utf-16be";if(255===t[0]&&254===t[1])return"utf-16le"}return!function(e){if(!e)return!1;for(var t=0,r=e.length;t<r;){if(e[t]<=127){t++;continue}if(e[t]>=194&&e[t]<=223)if(e[t+1]>>6!=2)return!1;else{t+=2;continue}if((224===e[t]&&e[t+1]>=160&&e[t+1]<=191||237===e[t]&&e[t+1]>=128&&e[t+1]<=159)&&e[t+2]>>6==2||(e[t]>=225&&e[t]<=236||e[t]>=238&&e[t]<=239)&&e[t+1]>>6==2&&e[t+2]>>6==2){t+=3;continue}if((240===e[t]&&e[t+1]>=144&&e[t+1]<=191||e[t]>=241&&e[t]<=243&&e[t+1]>>6==2||244===e[t]&&e[t+1]>=128&&e[t+1]<=143)&&e[t+2]>>6==2&&e[t+3]>>6==2){t+=4;continue}return!1}return!0}(e)?"latin1":"utf-8"}(e)}=t;return new TextDecoder(r).decode(e)}throw TypeError("blob must be a string, ArrayBuffer or ArrayBufferView")}(e)))throw TypeError('Parameter "sdf" must be a string');if(void 0===t.eol)if(t.eol="\n",t.mixedEOL)e=(e=e.replaceAll("\r\n","\n")).replaceAll("\r","\n");else{let r=new Set(e.slice(0,1e3));r.has("\r\n")?t.eol="\r\n":r.has("\r")&&(t.eol="\r")}let r=function(e,t,r){let i=[],a=0,n=0;for(;-1!==n;)if(-1!==(n=e.indexOf(t,a))){i.push([a,n]);let s=e.indexOf(r,n+t.length);n=-1===s?-1:a=s+r.length}else i.push([a,e.length]);return i}(e,`${t.eol}$$$$`,t.eol),i=[],a={},n=Date.now();for(let n=0;n<r.length;n++){let s=e.slice(...r[n]);if(s.length<40)continue;let o=[],l=function(e,t,r,i){let a=e.split(`${i.eol}>`);if(0===a.length||a[0].length<=5)return;let n={};n.molfile=a[0]+i.eol;for(let e=1;e<a.length;e++){let s=a[e].split(i.eol),o=s[0].indexOf("<"),l=s[0].indexOf(">"),d=s[0].slice(o+1,l);if(r.push(d),!t[d]&&(t[d]={counter:0,isNumeric:i.dynamicTyping,keep:!1},(!i.exclude||!i.exclude.includes(d))&&(!i.include||i.include.includes(d))&&(t[d].keep=!0,i.modifiers[d]&&(t[d].modifier=i.modifiers[d]),i.forEach[d]&&(t[d].forEach=i.forEach[d]))),t[d].keep){for(let e=1;e<s.length-1;e++)n[d]?n[d]+=i.eol+s[e]:n[d]=s[e];if(t[d].modifier){let e=t[d].modifier(n[d]);null==e?delete n[d]:n[d]=e}t[d].isNumeric&&(!Number.isFinite(+n[d])||n[d].match(/^0[0-9]/))&&(t[d].isNumeric=!1)}}return n}(s,a,o,t);if(l&&(!t.filter||t.filter(l))){i.push(l);for(let e=0;e<o.length;e++)a[o[e]].counter++}}for(let e in a){let t=a[e];if(t.isNumeric){t.minValue=1/0,t.maxValue=-1/0;for(let r=0;r<i.length;r++)if(i[r][e]){let a=Number.parseFloat(i[r][e]);i[r][e]=a,a>t.maxValue&&(t.maxValue=a),a<t.minValue&&(t.minValue=a)}}}for(let e in a)a[e].counter===i.length?a[e].always=!0:a[e].always=!1;let s=[];for(let e in a){let t=a[e];t.label=e,s.push(t)}return{time:Date.now()-n,molecules:i,labels:Object.keys(a),statistics:s}}(j);z&&z.atoms&&0!==z.atoms.length||(z=function(e){let t=e.replace(/\r/g,"").split("\n");if(t.length<4)return{};let r=t[3].slice(0,39).trim().split(/\s+/),i=Number(r[0]),a=Number(r[1]),n=[];for(let e=0;e<i;e+=1){let r=(t[4+e]||"").trim().split(/\s+/),i=parseFloat(r[0]),a=parseFloat(r[1]),s=parseFloat(r[2]),o=r[3]??"";n.push({x:i,y:a,z:s,symbol:o})}let s=[];for(let e=0;e<a;e+=1){let[r,a,n,o="0"]=(t[4+i+e]||"").trim().split(/\s+/);s.push({beginAtomIdx:Number(r),endAtomIdx:Number(a),order:Number(n)||1,stereo:Number(o)})}let o={},l=t.findIndex(e=>e.startsWith("M  END"));for(let e=l+1;e<t.length;e+=1){let r=t[e];if(r.startsWith(">")){let i=r.match(/<([^>]+)>/);if(i){let r=i[1],a=(t[e+1]||"").trim();o[r]=a,e+=1}}}return{atoms:n,bonds:s,properties:o}}(j));let{atoms:F=[],bonds:Y=[]}=z??{};"function"==typeof k&&k("parse:done",.2);let V=p;"auto"===V&&(V=1e-4>F.reduce((e,t)=>Math.max(e,Math.abs(t.z)),0)?"2d":"3d");let q=!1!==t.autoDetectMetalBonds&&F.some((e,t)=>!!h.has(e.symbol.toUpperCase())&&Y.every(e=>e.beginAtomIdx!==t+1&&e.endAtomIdx!==t+1));("3d"===V||q)&&!1!==t.autoDetectMetalBonds&&function(e,t,{metals:r=h,cutoff:i=3,relFactor:a=1.4}={}){let n=new Set(t.map(e=>`${Math.min(e.beginAtomIdx,e.endAtomIdx)}-${Math.max(e.beginAtomIdx,e.endAtomIdx)}`));e.forEach((s,o)=>{if(!r.has(s.symbol.toUpperCase()))return;let l=[];if(e.forEach((e,t)=>{if(o===t||"H"===e.symbol.toUpperCase())return;let r=s.x-e.x,i=s.y-e.y,a=s.z-e.z;l.push({li:t,dist:Math.hypot(r,i,a)})}),!l.length)return;let d=Math.max(i,Math.min(...l.map(e=>e.dist))*a);l.forEach(({li:e,dist:r})=>{if(r>d)return;let i=o+1,a=e+1,s=`${Math.min(i,a)}-${Math.max(i,a)}`;n.has(s)||(t.push({beginAtomIdx:i,endAtomIdx:a,order:0}),n.add(s))})})}(F,Y,t),(S??C??!0)&&function(e,t,r){let i=new Map(e.map((e,t)=>[t+1,[]]));t.forEach(({beginAtomIdx:e,endAtomIdx:t})=>{i.get(e).push(t),i.get(t).push(e)});let a=new Set(t.map(e=>`${Math.min(e.beginAtomIdx,e.endAtomIdx)}-${Math.max(e.beginAtomIdx,e.endAtomIdx)}`));e.forEach((n,s)=>{if(!r.has(n.symbol.toUpperCase()))return;let o=i.get(s+1).filter(t=>{let i;return"H"!==(i=e[t-1].symbol).toUpperCase()&&!r.has(i.toUpperCase())});if(!(o.length<2))for(let e=0;e<o.length-1;e+=1)for(let r=e+1;r<o.length;r+=1){let i=o[e],n=o[r],s=`${Math.min(i,n)}-${Math.max(i,n)}`;a.has(s)||(t.push({beginAtomIdx:i,endAtomIdx:n,order:0,isBridge:!0}),a.add(s))}})}(F,Y,U);let H=new i.YJl;H.name="molecule",H.userData.layoutMode=V;let W=new Set,G=Y.map((e,t)=>{let r=(e.beginAtomIdx??e.a??1)-1,i=(e.endAtomIdx??e.b??1)-1,a=4===e.order;return a&&(W.add(r),W.add(i)),{index:t,beginAtomIndex:r,endAtomIndex:i,order:Math.max(1,Math.min(4,e.order||1)),aromatic:a||void 0}}),K=F.map((e,t)=>{let r=(e.symbol||e.element||"").toUpperCase();return{index:t,element:r||"",atomicNumber:u[r],formalCharge:e.charge??e.formalCharge,aromatic:W.has(t)||void 0,x:e.x,y:e.y,z:e.z}});"function"==typeof k&&k("atoms:start",.3);let Q=new Set;Y.forEach(e=>{e.stereo&&1===e.order&&(Q.add(e.beginAtomIdx-1),Q.add(e.endAtomIdx-1))});let Z=[],X=Array(F.length).fill(null),$=new Map;if(O){let e=[];F.forEach((t,r)=>{let a=(t.symbol||"").toUpperCase();U.has(a)||e.push({atom:t,i:r}),(!U.has(a)||Q.has(r))&&(Z[r]=new i.Pq0(t.x*B,t.y*B,t.z*B))});let t=e.length,r=L??.45,a="sphere"===I?o(r):new i.WBB(r,A?.detail??0),n=new i.V9B({color:0xffffff}),s=new i.ZLX(a,n,t);s.instanceMatrix.setUsage(i.Vnu);let l=new i.B69,d=new Uint32Array(t);e.forEach(({atom:e,i:t},r)=>{l.position.set(e.x*B,e.y*B,e.z*B),l.updateMatrix(),s.setMatrixAt(r,l.matrix),d[r]=t}),s.userData.role="atomsInstanced",s.userData.instanceToAtomIndex=d,s.userData.atomMeta={elementByAtomIndex:K.map(e=>e.element),atomicNumberByAtomIndex:K.map(e=>e.atomicNumber??0),formalChargeByAtomIndex:K.map(e=>e.formalCharge??0),aromaticByAtomIndex:K.map(e=>!!e.aromatic)},H.add(s)}else F.forEach((e,t)=>{let{x:r,y:a,z:n,symbol:s}=e,h=(s||"").toUpperCase();if((!U.has(h)||Q.has(t))&&(Z[t]=new i.Pq0(r*B,a*B,n*B)),U.has(h))return;let c=L??x[h]??d[h]??.45,f=v[h]??l[h]??0xffffff,m="sphere"===I?o(c):new i.WBB(c,A?.detail??0),p=new i.V9B({color:f}),g=new i.eaF(m,p);g.position.set(r*B,a*B,n*B),g.userData.role="atom",b&&(g.userData.atom={...e,index:t,element:(s||"").toUpperCase(),atomicNumber:u[(s||"").toUpperCase()],formalCharge:e.charge??e.formalCharge,aromatic:W.has(t)||void 0}),H.add(g),X[t]=g,$.set(g.uuid,t)});"function"==typeof k&&k("atoms:done",.6);let J=Array(Y.length).fill(null),ee=new Map,et=D&&(!_||F.length<=_);if(Y.length&&et){let e=[],t=new i.Pq0(0,1,0),a=r?n:null,o=r?new i.V9B({color:0xaaaaaa}):null,l=(()=>{if(F.length<3)return t.clone();let e=F.map(e=>new i.Pq0(e.x,e.y,e.z));for(let t=0;t<e.length-2;t+=1)for(let r=t+1;r<e.length-1;r+=1)for(let a=r+1;a<e.length;a+=1){let n=new i.Pq0().subVectors(e[r],e[t]),s=new i.Pq0().subVectors(e[a],e[t]),o=new i.Pq0().crossVectors(n,s);if(o.lengthSq()>1e-6)return o.normalize()}return t.clone()})();if(Y.forEach((d,u)=>{let h=Z[d.beginAtomIdx-1],c=Z[d.endAtomIdx-1];if(!h||!c)return;let m=4===d.order,p=!0===d.isBridge,g=d.order??1;(g<1||g>3)&&(g=1);let v=n=>{let s=new i.Pq0().addVectors(h,n),l=new i.Pq0().addVectors(c,n);if(r){let e=new i.Pq0().subVectors(l,s),r=e.length();if(r<1e-6)return;let n=new i.Pq0().addVectors(s,l).multiplyScalar(.5),h=new i.eaF(a,o);h.scale.set(2*N,r,2*N),h.quaternion.setFromUnitVectors(t,e.clone().normalize()),h.position.copy(n),h.userData.role="bond",h.userData.bond={index:u,beginAtomIndex:(d.beginAtomIdx??1)-1,endAtomIndex:(d.endAtomIdx??1)-1,order:g,aromatic:m||void 0},H.add(h),J[u]=h,ee.set(h.uuid,u)}else if(m||p){let e=new i.LoY().setFromPoints([s,l]),t=m?.15:.08,r=new i.Fvt({color:0xaaaaaa,dashSize:t,gapSize:t}),a=new i.N1A(e,r);a.computeLineDistances(),H.add(a)}else e.push(s.x,s.y,s.z),e.push(l.x,l.y,l.z)};if(d.stereo&&1===g)return void(1===d.stereo?function(e,t,r,a,n){let o=new i.eaF(s.clone(),new i.V9B({color:0xaaaaaa,transparent:!0}));o.scale.set(r,1,r),f(o,e,t,n)&&a.add(o)}(h,c,N,H,t):6===d.stereo?function(e,t,r,a,s){let o=new i.Pq0().subVectors(t,e).divideScalar(5);for(let t=0;t<5;t+=1){let l=new i.Pq0().addVectors(e,o.clone().multiplyScalar(t)),d=l.clone().add(o.clone().multiplyScalar(.6)),u=n.clone();u.scale(r*(1-t/5),1,r*(1-t/5));let h=new i.eaF(u,new i.V9B({color:0xaaaaaa}));f(h,l,d,s)&&a.add(h)}}(h,c,N,H,t):v(new i.Pq0(0,0,0)));if(y&&1!==g){let e=new i.Pq0().subVectors(c,h).normalize(),r=new i.Pq0().crossVectors(l,e);if(1e-6>r.lengthSq()){let a=[t,new i.Pq0(0,0,1),new i.Pq0(1,0,0)];for(let t=0;t<a.length;t+=1){let n=new i.Pq0().crossVectors(e,a[t]);if(n.lengthSq()>1e-6){r=n;break}}}r.normalize().multiplyScalar(T),2===g?(v(r),v(r.clone().negate())):3===g&&(v(new i.Pq0(0,0,0)),v(r),v(r.clone().negate()))}else v(new i.Pq0(0,0,0))}),!r&&e.length){let t=new Float32Array(e),r=new i.LoY;r.setAttribute("position",new i.THS(t,3));let a=new i.mrM({color:0xaaaaaa}),n=new i.DXC(r,a);H.add(n)}}w&&(H.userData.properties=z.properties??{});let er=(j.split("\n")[0]||"").trim(),ei=/^\s*M\s+V30\b/m.test(j),ea={root:H,atomsGroup:(()=>{let e=new i.YJl;return e.name="atoms",e})(),bondsGroup:(()=>{let e=new i.YJl;return e.name="bonds",e})(),metadata:{atomCount:F.length,bondCount:Y.length,title:er||void 0,sdfFormatVersion:ei?"V3000":"V2000",source:"other"},mappings:{atomIndexToMesh:O?void 0:X,meshUuidToAtomIndex:O?void 0:$,instancedAtoms:O?{mesh:H.children.find(e=>e.isInstancedMesh)||null,instanceToAtomIndex:H.children.find(e=>e.isInstancedMesh)?.userData.instanceToAtomIndex||new Uint32Array}:void 0,bondIndexToMesh:J,meshUuidToBondIndex:ee},chemistry:{atoms:K,bonds:G}};return H.userData.loadResult=ea,"function"==typeof k&&k("done",1),H}function f(e,t,r,a){let n=new i.Pq0().subVectors(r,t),s=n.length();return!(s<1e-6)&&(e.scale.set(1,s,1),e.quaternion.setFromUnitVectors(a,n.clone().normalize()),e.position.copy(new i.Pq0().addVectors(t,r).multiplyScalar(.5)),!0)}},9732:(e,t,r)=>{r.d(t,{F:()=>l,o:()=>a});var i=r(4021);class a{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}let n=new i.qUd(-1,1,1,-1,0,1);class s extends i.LoY{constructor(){super(),this.setAttribute("position",new i.qtW([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new i.qtW([0,2,0,0,2,0],2))}}let o=new s;class l{constructor(e){this._mesh=new i.eaF(o,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,n)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}}}]);